<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Python Integrated Development Environment</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/python/python.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/theme/dracula.min.css">
    <script src="https://cdn.jsdelivr.net/pyodide/v0.22.1/full/pyodide.js"></script>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            font-family: 'Courier New', monospace;
            background-color: #282a36;
            color: #f8f8f2;
        }
        .container {
            display: flex;
            flex-direction: column;
            height: 100%;
        }
        .row {
            display: flex;
            flex: 1;
        }
        .column {
            flex: 1;
            padding: 10px;
            border: 1px solid #6272a4;
            display: flex;
            flex-direction: column;
        }
        iframe {
            flex: 1;
            border: none;
            background-color: #fff;
        }
        #terminal {
            background-color: #282a36;
            color: #50fa7b;
            font-family: 'Courier New', monospace;
            padding: 10px;
            overflow-y: auto;
            flex: 1;
        }
        #terminalInput {
            width: 100%;
            background-color: #44475a;
            color: #50fa7b;
            border: none;
            font-family: 'Courier New', monospace;
            outline: none;
            padding: 5px;
        }
        .CodeMirror {
            height: 100%;
        }
        h2 {
            margin-top: 0;
            color: #bd93f9;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="row">
            <div class="column">
                <h2>Browser</h2>
                <iframe src="https://docs.python.org/3/" title="Python Documentation"></iframe>
            </div>
            <div class="column">
                <h2>Python Editor</h2>
                <textarea id="code-editor">
# Write your Python code here
def greet(name):
    return f"Hello, {name}!"

print(greet('Python World'))
                </textarea>
            </div>
        </div>
        <div class="row">
            <div class="column">
                <h2>Terminal</h2>
                <div id="terminal"></div>
                <input type="text" id="terminalInput" placeholder="Enter command...">
            </div>
        </div>
    </div>
    <script>
        // Initialize CodeMirror
        const editor = CodeMirror.fromTextArea(document.getElementById("code-editor"), {
            lineNumbers: true,
            mode: "python",
            theme: "dracula"
        });

        const terminal = document.getElementById('terminal');
        const terminalInput = document.getElementById('terminalInput');

        function addToTerminal(text) {
            terminal.innerHTML += `<div>${text}</div>`;
            terminal.scrollTop = terminal.scrollHeight;
        }

        // Initialize Pyodide
        let pyodide;
        async function initPyodide() {
            pyodide = await loadPyodide();
            addToTerminal("Python environment loaded. Type 'help' for available commands.");
        }
        initPyodide();

        terminalInput.addEventListener('keyup', async function(event) {
            if (event.key === 'Enter') {
                const command = this.value;
                addToTerminal(`> ${command}`);
                
                if (command === 'help') {
                    addToTerminal('Available commands: help, clear, date, run');
                } else if (command === 'clear') {
                    terminal.innerHTML = '';
                } else if (command === 'date') {
                    addToTerminal(new Date().toString());
                } else if (command === 'run') {
                    try {
                        const code = editor.getValue();
                        const output = await pyodide.runPythonAsync(code);
                        addToTerminal(output);
                    } catch (error) {
                        addToTerminal(`Error: ${error.message}`);
                    }
                } else {
                    addToTerminal(`Command not found: ${command}`);
                }

                this.value = '';
            }
        });

        // Initial terminal message
        addToTerminal('Initializing Python environment...');
    </script>
</body>
</html>
