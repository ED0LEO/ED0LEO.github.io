<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Scientific Desktop Environment</title>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            font-family: 'Roboto', Arial, sans-serif;
            overflow: hidden;
            background-color: #1a2634;
        }
        .desktop {
            position: relative;
            width: 100%;
            height: 100%;
        }
        .window {
            position: absolute;
            background-color: #2c3e50;
            border: 1px solid #34495e;
            border-radius: 5px;
            box-shadow: 0 0 15px rgba(0,0,0,0.5);
            overflow: hidden;
        }
        .window-header {
            background-color: #34495e;
            color: #ecf0f1;
            padding: 8px;
            font-size: 14px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: move;
        }
        .window-content {
            padding: 10px;
            color: #ecf0f1;
            font-size: 12px;
            height: calc(100% - 36px);
            overflow-y: auto;
        }
        .close-btn {
            background: none;
            border: none;
            color: #ecf0f1;
            font-size: 16px;
            cursor: pointer;
        }
      #browser {
            width: 800px;
            height: 600px;
            top: 20px;
            left: 20px;
            display: flex;
            flex-direction: column;
            z-index: 1000;
        }
        
        #browser-content {
            flex-grow: 1;
            overflow-y: auto;
            background-color: white;
            color: black;
            padding: 10px;
            box-sizing: border-box;
        }
        
        .browser-bar {
            flex-shrink: 0;
            display: flex;
            padding: 5px;
            background-color: #34495e;
        }
        
        .browser-bar input {
            flex-grow: 1;
            margin: 0 5px;
            padding: 5px;
        }
        
        .browser-bar button {
            padding: 5px 10px;
            margin: 0 2px;
        }
        
        .page-content {
            max-width: 100%;
            margin: 0 auto;
            padding: 20px;
        }
        
        .chart-container {
            width: 100%;
            height: 100%;
        }
        
        #taskbar {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: #34495e;
            padding: 5px;
            display: flex;
            justify-content: flex-start;
            align-items: center;
        }
        .taskbar-item {
            background-color: #2c3e50;
            color: #ecf0f1;
            padding: 5px 10px;
            margin-right: 5px;
            border-radius: 3px;
            cursor: pointer;
        }
        #clock {
            margin-left: auto;
            color: #ecf0f1;
        }
        .search-result {
            margin-bottom: 20px;
            padding: 10px;
            border: 1px solid #34495e;
            border-radius: 5px;
        }
        .search-result h3 {
            margin-top: 0;
        }
        .search-result a {
            color: #3498db;
            text-decoration: none;
        }
        .search-result a:hover {
            text-decoration: underline;
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
</head>
<body>
    <div class="desktop">
        <div class="window" id="browser">
            <div class="window-header">
                Web Browser
                <button class="close-btn">&times;</button>
            </div>
            <div class="browser-bar">
                <button onclick="goBack()">&larr;</button>
                <button onclick="goForward()">&rarr;</button>
                <input type="text" id="url-bar" value="https://sciencesearch.com">
                <button onclick="navigateTo()">Go</button>
            </div>
            <div id="browser-content"></div>
        </div>

        <div class="window" style="width: 600px; height: 450px; top: 50px; right: 20px;">
            <div class="window-header">
                CERN LHC Status
                <button class="close-btn">&times;</button>
            </div>
            <div class="window-content">
                <iframe src="https://op-webtools.web.cern.ch/vistar/vistars.php?usr=LHC3" width="100%" height="100%" frameborder="0"></iframe>
            </div>
        </div>

        <div class="window" style="width: 450px; height: 350px; bottom: 50px; left: 20px;">
            <div class="window-header">
                NASA Exoplanet Archive
                <button class="close-btn">&times;</button>
            </div>
            <div class="window-content">
                <iframe src="https://exoplanetarchive.ipac.caltech.edu/cgi-bin/TblView/nph-tblView?app=ExoTbls&config=PS" width="100%" height="100%" frameborder="0"></iframe>
            </div>
        </div>

        <div class="window" style="width: 400px; height: 300px; top: 370px; right: 20px;">
            <div class="window-header">
                Global Temperature Anomalies
                <button class="close-btn">&times;</button>
            </div>
            <div class="window-content">
                <div class="chart-container">
                    <canvas id="temperatureChart"></canvas>
                </div>
            </div>
        </div>
        
        <div class="window" style="width: 350px; height: 250px; bottom: 50px; right: 440px;">
            <div class="window-header">
                Latest AI News
                <button class="close-btn">&times;</button>
            </div>
            <div class="window-content" id="ai-news">
                Loading latest AI news...
            </div>
        </div>
    </div>

    <div id="taskbar">
        <div class="taskbar-item" onclick="toggleWindow('browser')">Browser</div>
        <div class="taskbar-item" onclick="toggleWindow('lhc-status')">LHC Status</div>
        <div class="taskbar-item" onclick="toggleWindow('exoplanet-archive')">Exoplanets</div>
        <div class="taskbar-item" onclick="toggleWindow('temperature-chart')">Global Temp</div>
        <div class="taskbar-item" onclick="toggleWindow('ai-news')">AI News</div>
        <div id="clock"></div>
    </div>

    <script>// Simulated browser content
        const pages = {
            "https://sciencesearch.com": `
                <h1>ScienceSearch</h1>
                <input type="text" id="search-input" placeholder="Search scientific topics">
                <button onclick="performScientificSearch()">Search Scientific Databases</button>
                <button onclick="performSearch()">Search Local Content</button>
                <div id="search-results"></div>
                <h2>Quick Links:</h2>
                <ul>
                    <li><a href="https://www.nature.com" target="_blank">Nature</a></li>
                    <li><a href="https://www.sciencemag.org" target="_blank">Science Magazine</a></li>
                    <li><a href="https://www.nasa.gov" target="_blank">NASA</a></li>
                    <li><a href="https://www.scientificamerican.com" target="_blank">Scientific American</a></li>
                </ul>
            `,
            "https://www.nature.com": `
                <h1>Nature</h1>
                <p>The leading international weekly journal of science.</p>
                <h2>Latest Articles:</h2>
                <ul>
                    <li><a href="#" onclick="navigateTo('https://www.nature.com/articles/d41586-023-01485-0')">DeepMind's AlphaFold revolution</a></li>
                    <li><a href="#" onclick="navigateTo('https://www.nature.com/articles/d41586-023-01478-z')">Quantum entanglement wins 2022 Nobel Prize in physics</a></li>
                </ul>
            `,
            "https://www.nature.com/articles/d41586-023-01485-0": `
                <h1>DeepMind's AlphaFold revolution</h1>
                <p>The AI protein-structure prediction tool has transformed biology and drug discovery.</p>
                <p>AlphaFold, an artificial intelligence (AI) network developed by Google's DeepMind, can predict the 3D structures of proteins with unprecedented accuracy. This breakthrough has accelerated research in various fields, from drug discovery to evolutionary biology.</p>
            `,
            "https://www.nature.com/articles/d41586-023-01478-z": `
                <h1>Quantum entanglement wins 2022 Nobel Prize in physics</h1>
                <p>Three pioneers of quantum information science share the prize for their work on an 'totally crazy' phenomenon that Einstein couldn't believe in.</p>
                <p>The 2022 Nobel Prize in Physics was awarded to Alain Aspect, John Clauser and Anton Zeilinger for their groundbreaking experiments with entangled quantum states, where two particles behave like a single unit even when separated.</p>
            `,
            "https://www.sciencemag.org": `
                <h1>Science Magazine</h1>
                <p>The world's leading outlet for scientific news, commentary, and cutting-edge research.</p>
                <h2>Featured Articles:</h2>
                <ul>
                    <li><a href="#" onclick="navigateTo('https://www.sciencemag.org/news/2023/05/ai-can-decode-speech-brain-activity')">AI can decode speech from brain activity</a></li>
                    <li><a href="#" onclick="navigateTo('https://www.sciencemag.org/news/2023/04/world-s-first-3d-printed-rocket-fails-reach-orbit')">World's first 3D-printed rocket fails to reach orbit</a></li>
                </ul>
            `,
            "https://www.sciencemag.org/news/2023/05/ai-can-decode-speech-brain-activity": `
                <h1>AI can decode speech from brain activity</h1>
                <p>New system could help people who can't speak to communicate.</p>
                <p>Researchers have developed an AI system that can decode spoken words and phrases from brain activity with unprecedented accuracy. This breakthrough could lead to new ways for people who are unable to speak to communicate.</p>
            `,
            "https://www.sciencemag.org/news/2023/04/world-s-first-3d-printed-rocket-fails-reach-orbit": `
                <h1>World's first 3D-printed rocket fails to reach orbit</h1>
                <p>Relativity Space's Terran 1 rocket demonstrates the potential of additive manufacturing in aerospace.</p>
                <p>Although it didn't reach orbit, the launch of Terran 1, the world's first 3D-printed rocket, marks a significant milestone in space technology. The rocket, made by Relativity Space, demonstrates the potential of using additive manufacturing in aerospace applications.</p>
            `
        };
        
        let browserHistory = [];
        let currentPageIndex = -1;
        
        
        function navigateTo(url) {
            if (!url) {
                url = document.getElementById('url-bar').value;
            }
            if (!/^https?:\/\//i.test(url)) {
                url = 'https://' + url;
            }
            
            if (pages[url]) {
                const content = pages[url];
                document.getElementById('browser-content').innerHTML = `<div class="page-content">${content}</div>`;
            } else {
                document.getElementById('browser-content').innerHTML = `
                    <div class="page-content">
                        <h1>External Link</h1>
                        <p>The page "${url}" is outside our simulated environment.</p>
                        <p>In a real browser, this would load: <a href="${url}" target="_blank">${url}</a></p>
                    </div>
                `;
            }
            document.getElementById('url-bar').value = url;
        
            if (currentPageIndex < browserHistory.length - 1) {
                browserHistory = browserHistory.slice(0, currentPageIndex + 1);
            }
            browserHistory.push(url);
            currentPageIndex = browserHistory.length - 1;
        }
        
        function goBack() {
            if (currentPageIndex > 0) {
                currentPageIndex--;
                navigateTo(browserHistory[currentPageIndex]);
            }
        }
        
        function goForward() {
            if (currentPageIndex < browserHistory.length - 1) {
                currentPageIndex++;
                navigateTo(browserHistory[currentPageIndex]);
            }
        }
        
        function performSearch() {
            const query = document.getElementById('search-input').value.toLowerCase();
            const results = Object.entries(pages).filter(([url, content]) => 
                content.toLowerCase().includes(query) && url !== "https://sciencesearch.com"
            );
        
            let searchResultsHTML = `<h2>Search Results for "${query}"</h2>`;
            if (results.length === 0) {
                searchResultsHTML += "<p>No results found.</p>";
            } else {
                results.forEach(([url, content]) => {
                    const title = content.match(/<h1>(.*?)<\/h1>/i)[1];
                    const snippet = content.replace(/<[^>]*>/g, '').slice(0, 150) + "...";
                    searchResultsHTML += `
                        <div class="search-result">
                            <h3><a href="#" onclick="navigateTo('${url}')">${title}</a></h3>
                            <p>${snippet}</p>
                            <a href="#" onclick="navigateTo('${url}')">${url}</a>
                        </div>
                    `;
                });
            }
            document.getElementById('search-results').innerHTML = searchResultsHTML;
        }
        
        // Initialize browser
        navigateTo("https://sciencesearch.com");

        // Global Temperature Chart
        const tempCtx = document.getElementById('temperatureChart').getContext('2d');
        new Chart(tempCtx, {
            type: 'line',
            data: {
                labels: ['1880', '1900', '1920', '1940', '1960', '1980', '2000', '2020'],
                datasets: [{
                    label: 'Temperature Anomaly (Â°C)',
                    data: [-0.16, -0.08, -0.27, 0.12, 0.03, 0.26, 0.39, 0.98],
                    borderColor: 'rgb(255, 99, 132)',
                    tension: 0.1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: false
                    }
                }
            }
        });

        async function fetchAINews() {
            try {
                const response = await axios.get('https://www.technologyreview.com/topic/artificial-intelligence/', {
                    headers: {
                        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36'
                    }
                });
                
                const parser = new DOMParser();
                const doc = parser.parseFromString(response.data, 'text/html');
                
                const articles = Array.from(doc.querySelectorAll('article')).slice(0, 5);
                
                const newsHtml = articles.map(article => {
                    const title = article.querySelector('h3').textContent;
                    const url = article.querySelector('a').href;
                    const description = article.querySelector('p')?.textContent || 'No description available';
                    
                    return `
                        <div>
                            <h3><a href="#" onclick="navigateTo('${url}')">${title}</a></h3>
                            <p>${description}</p>
                        </div>
                    `;
                }).join('');
                
                document.getElementById('ai-news').innerHTML = newsHtml;
            } catch (error) {
                console.error('Error fetching AI news:', error);
                document.getElementById('ai-news').innerHTML = 'Failed to load news. Please try again later.';
            }
        }
        
        fetchAINews();

        // Taskbar clock
        function updateClock() {
            const now = new Date();
            document.getElementById('clock').textContent = now.toLocaleTimeString();
        }

        setInterval(updateClock, 1000);
        updateClock();

        // Window management
        function toggleWindow(windowId) {
            const windows = {
                'browser': document.getElementById('browser'),
                'lhc-status': document.querySelector('.window:nth-child(2)'),
                'exoplanet-archive': document.querySelector('.window:nth-child(3)'),
                'temperature-chart': document.querySelector('.window:nth-child(4)'),
                'ai-news': document.querySelector('.window:nth-child(5)')
            };
        
            const window = windows[windowId];
            if (window) {
                window.style.display = window.style.display === 'none' ? 'block' : 'none';
            }
        }

        const PUBMED_API_BASE = 'https://eutils.ncbi.nlm.nih.gov/entrez/eutils/';
        const ARXIV_API_BASE = 'https://export.arxiv.org/api/query';
        
        async function searchPubMed(query) {
            try {
                const searchResponse = await axios.get(`${PUBMED_API_BASE}esearch.fcgi`, {
                    params: {
                        db: 'pubmed',
                        term: query,
                        retmax: 5,
                        format: 'json'
                    }
                });
        
                const ids = searchResponse.data.esearchresult.idlist;
        
                const summaryResponse = await axios.get(`${PUBMED_API_BASE}esummary.fcgi`, {
                    params: {
                        db: 'pubmed',
                        id: ids.join(','),
                        retmode: 'json'
                    }
                });
        
                return Object.values(summaryResponse.data.result)
                    .filter(item => item.uid)
                    .map(item => ({
                        title: item.title,
                        authors: item.sortfirstauthor,
                        date: item.pubdate,
                        url: `https://pubmed.ncbi.nlm.nih.gov/${item.uid}`,
                        source: 'PubMed'
                    }));
            } catch (error) {
                console.error('Error searching PubMed:', error);
                return [];
            }
        }
        
        async function searchArXiv(query) {
            try {
                const response = await axios.get(`https://cors-anywhere.herokuapp.com/${ARXIV_API_BASE}`, {
                    params: {
                        search_query: `all:${query}`,
                        start: 0,
                        max_results: 5
                    }
                });
        
                const parser = new DOMParser();
                const xmlDoc = parser.parseFromString(response.data, "text/xml");
                const entries = xmlDoc.getElementsByTagName("entry");
        
                return Array.from(entries).map(entry => ({
                    title: entry.getElementsByTagName("title")[0].textContent,
                    authors: Array.from(entry.getElementsByTagName("author")).map(author => author.getElementsByTagName("name")[0].textContent).join(", "),
                    date: new Date(entry.getElementsByTagName("published")[0].textContent).toLocaleDateString(),
                    url: entry.getElementsByTagName("id")[0].textContent,
                    source: 'arXiv'
                }));
            } catch (error) {
                console.error('Error searching arXiv:', error);
                return [];
            }
        }
        
        async function performScientificSearch() {
            const query = document.getElementById('search-input').value;
            document.getElementById('search-results').innerHTML = '<p>Searching...</p>';
            
            try {
                const [pubmedResults, arxivResults] = await Promise.all([
                    searchPubMed(query),
                    searchArXiv(query)
                ]);
        
                const allResults = [...pubmedResults, ...arxivResults];
                displayScientificResults(allResults);
            } catch (error) {
                console.error('Error performing search:', error);
                document.getElementById('search-results').innerHTML = '<p>An error occurred while searching. Please try again. If the problem persists, it may be due to CORS restrictions.</p>';
            }
        }
        
        function displayScientificResults(results) {
            let html = '<h2>Scientific Search Results</h2>';
            if (results.length === 0) {
                html += '<p>No results found. Try a different search term.</p>';
            } else {
                html += '<ul>';
                results.forEach(article => {
                    html += `
                        <li class="search-result">
                            <h3><a href="${article.url}" target="_blank">${article.title}</a></h3>
                            <p>Authors: ${article.authors}</p>
                            <p>Published: ${article.date}</p>
                            <p>Source: ${article.source}</p>
                        </li>
                    `;
                });
                html += '</ul>';
            }
            document.getElementById('search-results').innerHTML = html;
        }
        
        // Make windows draggable
        document.querySelectorAll('.window').forEach(makeWindowDraggable);

        function makeWindowDraggable(window) {
            const header = window.querySelector('.window-header');
            let isDragging = false;
            let offsetX, offsetY;
        
            header.addEventListener('mousedown', (e) => {
                isDragging = true;
                offsetX = e.clientX - window.getBoundingClientRect().left;
                offsetY = e.clientY - window.getBoundingClientRect().top;
                window.style.zIndex = 1000;
            });
        
            document.addEventListener('mousemove', (e) => {
                if (isDragging) {
                    window.style.left = (e.clientX - offsetX) + 'px';
                    window.style.top = (e.clientY - offsetY) + 'px';
                }
            });
        
            document.addEventListener('mouseup', () => {
                isDragging = false;
            });
        }
    </script>
</body>
</html>
