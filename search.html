<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Professor's Lab - Classified Search</title>
	<link rel="icon" type="image/x-icon" href="/output-onlinepngtools(2).ico">
	<!-- Google CSE script -->
	<script async src="https://cse.google.com/cse.js?cx=371fb8e2b283942a6"></script>
	<style>
		:root {
			/* Dark theme variables */
			--dark-bg-primary: #0a192f;
			--dark-bg-secondary: #172a45;
			--dark-bg-tertiary: #1f3a5f;
			--dark-accent-primary: #64ffda;
			--dark-accent-secondary: #bb86fc;
			--dark-text-primary: #e6f1ff;
			--dark-text-secondary: #8892b0;
			--dark-text-tertiary: #6c6577;
			--dark-border-color: rgba(100, 255, 218, 0.3);
			--dark-alert-color: #ff5555;

			--dark-alert-color-rgb: 255, 0, 0;
			/* Red in RGB */

			/* Light theme variables */
			--light-bg-primary: #f5f5f7;
			--light-bg-secondary: #e2e2e7;
			--light-bg-tertiary: #d1d1d6;
			--light-accent-primary: #0070F3;
			--light-accent-secondary: #6b21a8;
			--light-text-primary: #1f2937;
			--light-text-secondary: #4b5563;
			--light-text-tertiary: #6b7280;
			--light-border-color: rgba(0, 112, 243, 0.3);
			--light-alert-color: #dc2626;

			--light-alert-color-rgb: 255, 0, 0;
			/* Red in RGB */

			/* Active theme (defaults to dark) */
			--bg-primary: var(--dark-bg-primary);
			--bg-secondary: var(--dark-bg-secondary);
			--bg-tertiary: var(--dark-bg-tertiary);
			--accent-primary: var(--dark-accent-primary);
			--accent-secondary: var(--dark-accent-secondary);
			--text-primary: var(--dark-text-primary);
			--text-secondary: var(--dark-text-secondary);
			--text-tertiary: var(--dark-text-tertiary);
			--border-color: var(--dark-border-color);
			--alert-color: var(--dark-alert-color);

			--alert-color-rgb: var(--dark-alert-color-rgb);
		}

		body {
			font-family: 'Courier New', monospace;
			margin: 0;
			padding: 20px;
			background-color: var(--bg-primary);
			color: var(--accent-primary);
			min-height: 100vh;
			position: relative;
			transition: background-color 0.3s ease, color 0.3s ease;
		}

		.theme-toggle {
			position: absolute;
			top: 20px;
			right: 20px;
			z-index: 100;
			display: flex;
			align-items: center;
		}

		.theme-toggle-label {
			margin-right: 10px;
			font-size: 14px;
			color: var(--text-secondary);
		}

		.theme-switch {
			position: relative;
			display: inline-block;
			width: 60px;
			height: 30px;
		}

		.theme-switch input {
			opacity: 0;
			width: 0;
			height: 0;
		}

		.slider {
			position: absolute;
			cursor: pointer;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
			background-color: var(--bg-tertiary);
			transition: .4s;
			border-radius: 30px;
			border: 2px solid var(--accent-primary);
		}

		.slider:before {
			position: absolute;
			content: "";
			height: 22px;
			width: 22px;
			left: 4px;
			bottom: 4px;
			background-color: var(--accent-primary);
			transition: .4s;
			border-radius: 50%;
		}

		input:checked+.slider:before {
			transform: translateX(26px);
		}

		.logo-container {
			text-align: center;
			margin-top: 60px;
			margin-bottom: 20px;
			position: relative;
		}

		.logo {
			font-size: 48px;
			font-family: 'Courier New', monospace;
			letter-spacing: 2px;
			text-transform: uppercase;
			position: relative;
			display: inline-block;
			text-shadow: 0 0 10px var(--accent-primary);
			color: var(--accent-primary);
			transition: color 0.3s ease, text-shadow 0.3s ease;
		}

		.logo::before {
			content: "CLASSIFIED";
			position: absolute;
			top: -20px;
			left: 50%;
			transform: translateX(-50%);
			font-size: 14px;
			color: var(--alert-color);
			letter-spacing: 5px;
			font-weight: bold;
			transition: color 0.3s ease;
		}

		.logo::after {
			content: "LAB-SEC-7";
			position: absolute;
			bottom: -20px;
			left: 50%;
			transform: translateX(-50%);
			font-size: 14px;
			color: var(--text-secondary);
			letter-spacing: 3px;
			transition: color 0.3s ease;
		}

		.search-container {
			margin: 0 auto;
			max-width: 800px;
			position: relative;
		}

		.footer {
			position: fixed;
			bottom: 0;
			left: 0;
			width: 100%;
			background: var(--bg-secondary);
			border-top: 1px solid var(--border-color);
			padding: 10px;
			font-size: 12px;
			color: var(--text-secondary);
			text-align: center;
			transition: background 0.3s ease, color 0.3s ease, border-color 0.3s ease;
		}

		/* Grid overlay effect */
		body::before {
			content: "";
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background:
				linear-gradient(rgba(100, 255, 218, 0.03) 1px, transparent 1px),
				linear-gradient(90deg, rgba(100, 255, 218, 0.03) 1px, transparent 1px);
			background-size: 20px 20px;
			pointer-events: none;
			z-index: -1;
			opacity: var(--grid-opacity, 1);
			transition: opacity 0.3s ease;
		}

		body.light-theme::before {
			--grid-opacity: 0.5;
			background:
				linear-gradient(rgba(0, 112, 243, 0.03) 1px, transparent 1px),
				linear-gradient(90deg, rgba(0, 112, 243, 0.03) 1px, transparent 1px);
		}

		/* Custom styling for Google CSE - Comprehensive overrides */
		.gcse-search {
			margin: 30px auto;
			max-width: 800px;
		}

		/* Main container */
		.gsc-control-cse {
			background-color: transparent !important;
			border: none !important;
			padding: 0 !important;
			font-family: 'Courier New', monospace !important;
			max-width: 100% !important;
		}

		/* Search box container */
		.gsc-search-box-tools .gsc-search-box .gsc-input-box {
			background-color: var(--bg-secondary) !important;
			border: 2px solid var(--accent-primary) !important;
			box-shadow: 0 0 15px var(--border-color) !important;
			height: auto !important;
			border-radius: 0 !important;
			transition: background-color 0.3s ease, border 0.3s ease, box-shadow 0.3s ease;
		}

		/* Input field */
		.gsib_a {
			padding: 10px !important;
		}

		.gsc-input-box .gsib_a .gsc-input {
			background: transparent !important;
			color: var(--text-primary) !important;
			font-family: 'Courier New', monospace !important;
			font-size: 16px !important;
			transition: color 0.3s ease;
		}

		/* Remove the background image in the search box */
		input.gsc-input {
			background-image: none !important;
		}

		/* Clear button */
		.gsib_b {
			display: none !important;
		}

		/* Search button */
		.gsc-search-button-v2 {
			background-color: var(--bg-secondary) !important;
			border: 2px solid var(--accent-primary) !important;
			border-radius: 0 !important;
			color: var(--accent-primary) !important;
			cursor: pointer !important;
			font-family: 'Courier New', monospace !important;
			text-transform: uppercase !important;
			letter-spacing: 2px !important;
			transition: all 0.3s ease !important;
			margin-left: 8px !important;
			padding: 12px 22px !important;
			box-shadow: 0 0 15px var(--border-color) !important;
		}

		.gsc-search-button-v2:hover {
			background-color: var(--accent-primary) !important;
			color: var(--bg-primary) !important;
		}

		.gsc-search-button-v2 svg {
			fill: var(--accent-primary) !important;
			width: 16px !important;
			height: 16px !important;
			vertical-align: middle !important;
			transition: fill 0.3s ease;
		}

		.gsc-search-button-v2:hover svg {
			fill: var(--bg-primary) !important;
		}

		/* Refinement block (tab buttons) */
		.gsc-refinement-block {
			margin: 20px 0 !important;
			padding: 0 !important;
		}

		.gsc-refinement-label {
			background: var(--bg-secondary) !important;
			border: 1px solid var(--border-color) !important;
			color: var(--text-secondary) !important;
			font-size: 12px !important;
			padding: 8px 16px !important;
			margin: 0 5px !important;
			cursor: pointer !important;
			font-family: 'Courier New', monospace !important;
			text-transform: uppercase !important;
			letter-spacing: 1px !important;
			transition: all 0.3s ease !important;
			border-radius: 0 !important;
		}

		.gsc-refinement-active {
			background: var(--bg-tertiary) !important;
			color: var(--accent-primary) !important;
			border-color: var(--accent-primary) !important;
		}

		.gsc-refinement-label:hover:not(.gsc-refinement-active) {
			background: var(--bg-tertiary) !important;
			color: var(--text-primary) !important;
		}

		.gs-webResult {
			margin-bottom: 15px !important;
			padding: 10px !important;
			width: fit-content !important;
			max-width: 100% !important;
		}

		.gsc-result {
			background-color: var(--bg-secondary) !important;
			border: 2px dashed var(--text-tertiary) !important;
			margin-bottom: 15px !important;
			padding: 10px !important;
			box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1) !important;
			max-width: 100% !important;
			transition: background-color 0.3s ease, border 0.3s ease, box-shadow 0.3s ease;
		}

		.gsc-webResult.gsc-result {
			box-shadow: 0 0 15px transparent !important;
		}

		.gsc-webResult.gsc-result:hover {
			box-shadow: 0 0 15px var(--border-color) !important;
		}

		.gcsc-find-more-on-google {
			visibility: hidden !important;
		}

		/* Result title */
		.gs-title,
		.gs-title b {
			color: var(--accent-primary) !important;
			font-size: 18px !important;
			text-decoration: none !important;
			font-family: 'Courier New', monospace !important;
			transition: color 0.3s ease;
		}

		.gs-title a {
			color: var(--accent-primary) !important;
			text-decoration: none !important;
			transition: color 0.3s ease;
		}

		.gs-title a:visited {
			color: var(--accent-secondary) !important;
			transition: color 0.3s ease;
		}

		/* Result URL */
		.gs-visibleUrl-short,
		.gs-visibleUrl-long,
		.gs-visibleUrl {
			color: var(--text-secondary) !important;
			font-size: 13px !important;
			margin: 5px 0 !important;
			word-break: break-all !important;
			font-family: 'Courier New', monospace !important;
			transition: color 0.3s ease;
		}

		/* Result snippet text */
		.gs-snippet {
			color: var(--text-primary) !important;
			font-size: 14px !important;
			line-height: 1.6 !important;
			font-family: 'Courier New', monospace !important;
			transition: color 0.3s ease;
		}

		/* PDF indicator */
		.gs-fileFormat {
			display: inline-block !important;
			margin: 5px 0 !important;
			padding: 3px 6px !important;
			background: rgba(var(--alert-color-rgb), 0.2) !important;
			/* Opacity on background */
			color: var(--alert-color) !important;
			/* Full color for text */
			font-size: 12px !important;
			border: 1px solid var(--alert-color) !important;
			font-family: 'Courier New', monospace !important;
			transition: background 0.3s ease, color 0.3s ease, border 0.3s ease;
		}

		.gs-fileFormat .gs-fileFormatType {
			color: var(--text-tertiary) !important;
			transition: color 0.3s ease;
		}

		/* Image results */
		.gs-imagePreviewArea {
			background: var(--text-tertiary) !important;
			border: 2px solid var(--accent-primary) !important;
			transition: background 0.3s ease, border 0.3s ease;
		}

		.gs-image-box.gs-web-image-box img.gs-image:hover {
			border: 2px solid var(--accent-primary) !important;
		}

		.gs-image-box {
			position: relative !important;
			margin-bottom: 10px !important;
			max-width: 100% !important;
			width: auto !important;
			overflow: hidden !important;
		}

		.gs-image {
			width: 150px !important;
			max-width: 100% !important;
			object-fit: cover !important;
			border: 2px solid transparent !important;
			transition: border 0.3s ease;
		}

		/* Pagination */
		.gsc-cursor-container {
			background-color: transparent !important;
		}

		.gsc-cursor-page {
			background-color: transparent !important;
			color: var(--text-tertiary) !important;
			padding: 10px 15px !important;
			margin: 0 5px !important;
			font-size: 18px !important;
			transition: background-color 0.3s ease, color 0.3s ease;
		}

		.gsc-cursor-current-page {
			background-color: var(--text-secondary) !important;
			color: var(--bg-primary) !important;
		}

		.gsc-cursor-page:hover:is(.gsc-cursor-current-page) {
			text-decoration: none !important;
			background-color: var(--text-primary) !important;
		}

		.gsc-cursor-page:hover:not(.gsc-cursor-current-page) {
			background-color: var(--accent-primary) !important;
			color: var(--bg-primary) !important;
			text-decoration: none !important;
		}

		.gsc-cursor-box {
			padding-top: 10px;
			padding-bottom: 10px;
			text-align: center !important;
		}

		.gsc-trailing-more-results {
			background-color: var(--text-tertiary) !important;
			color: var(--bg-primary) !important;
			transition: background-color 0.3s ease, color 0.3s ease;
		}

		/* Search stats */
		.gsc-result-info {
			color: var(--text-secondary) !important;
			font-size: 14px !important;
			margin-bottom: 20px !important;
			border-bottom: 1px solid var(--border-color) !important;
			padding-bottom: 10px !important;
			text-transform: uppercase !important;
			letter-spacing: 1px !important;
			font-family: 'Courier New', monospace !important;
			transition: color 0.3s ease, border-bottom 0.3s ease;
		}

		.gsc-tabsArea,
		.gsc-refinementsArea,
		.gsc-above-wrapper-area {
			border-bottom: none !important;
		}

		.gsc-above-wrapper-area {
			margin-bottom: 0px !important;
		}

		.gsc-completion-container {
			background-color: var(--bg-primary) !important;
			transition: background-color 0.3s ease;
		}

		.gsc-completion-container .gsc-completion-selected {
			background-color: var(--accent-primary) !important;
			color: var(--bg-primary) !important;
			transition: background-color 0.3s ease, color 0.3s ease;
		}

		.gs-spelling {
			color: var(--text-primary) !important;
			transition: color 0.3s ease;
		}

		.gs-spelling a {
			color: var(--accent-primary) !important;
			transition: color 0.3s ease;
		}

		.gsc-role,
		.gsc-org {
			color: var(--text-primary) !important;
			transition: color 0.3s ease;
		}

		.gsc-tabsArea,
		.gsc-refinementsArea {
			background-color: transparent !important;
			border: none;
		}

		.gsc-tabHeader,
		.gsc-refinementHeader {
			background-color: transparent !important;
			color: var(--text-secondary) !important;
			transition: color 0.3s ease;
		}

		.gsc-tabsArea .gsc-tabsNav,
		.gsc-refinementArea .gsc-refinementNav {
			background-color: transparent !important;
		}

		.gsc-tabsArea .gsc-tabsNav .gsc-tab,
		.gsc-refinementArea .gsc-refinementNav .gsc-refinement {
			background-color: transparent !important;
			color: var(--text-secondary) !important;
			transition: color 0.3s ease;
		}

		.gsc-tabsArea .gsc-tabsNav .gsc-tab.gsc-selected,
		.gsc-refinementArea .gsc-refinementNav .gsc-refinement.gsc-selected {
			background-color: transparent !important;
			color: var(--text-secondary) !important;
			transition: color 0.3s ease;
		}

		.gsc-tabHeader.gsc-tabhActive,
		.gsc-refinementHeader.gsc-refinementhActive {
			border-color: var(--accent-primary) !important;
			transition: border-color 0.3s ease;
		}

		.gs-per-result-labels {
			visibility: hidden !important;
		}

		/* Hide branding */
		.gcsc-branding {
			display: none !important;
		}

		/* No results */
		.gs-no-results-result .gs-snippet {
			background-color: transparent !important;
			border: none !important;
			color: var(--alert-color) !important;
			font-family: 'Courier New', monospace !important;
			padding: 20px !important;
			font-size: 16px !important;
			text-transform: uppercase !important;
			letter-spacing: 1px !important;
			transition: color 0.3s ease;
		}

		/* Add some laboratory/tech decorative elements */
		.gsc-search-box-tools .gsc-search-box .gsc-input-box::before {
			content: ">";
			position: absolute;
			left: -20px;
			top: 50%;
			transform: translateY(-50%);
			color: var(--accent-primary);
			font-weight: bold;
			transition: color 0.3s ease;
		}

		.gsc-search-box-tools .gsc-search-box .gsc-input-box::after {
			content: "";
			position: absolute;
			right: -20px;
			top: 50%;
			transform: translateY(-50%);
			width: 10px;
			height: 10px;
			border-radius: 50%;
			background-color: var(--accent-primary);
			animation: pulse 2s infinite;
			transition: background-color 0.3s ease;
		}

		/* Blinking cursor animation */
		@keyframes blink {

			0%,
			100% {
				opacity: 1;
			}

			50% {
				opacity: 0;
			}
		}

		/* Pulse animation for the search box indicator */
		@keyframes pulse {
			0% {
				opacity: 0.4;
			}

			50% {
				opacity: 1;
			}

			100% {
				opacity: 0.4;
			}
		}

		/* Terminal-style indicators */
		.search-container::before {
			content: "[SYSTEM:ONLINE]";
			position: absolute;
			top: -30px;
			left: 0;
			font-size: 12px;
			color: var(--accent-primary);
			opacity: 0.7;
			transition: color 0.3s ease;
		}

		.search-container::after {
			content: "";
			position: absolute;
			top: -30px;
			right: 0;
			width: 8px;
			height: 14px;
			background-color: var(--accent-primary);
			animation: blink 1s infinite;
			transition: background-color 0.3s ease;
		}

		/* Matrix-style scrolling background - subtle */
		@keyframes matrix {
			0% {
				background-position: 0% 0%;
			}

			100% {
				background-position: 0% 100%;
			}
		}

		body::after {
			content: "";
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400' viewBox='0 0 800 800'%3E%3Cg fill='none' stroke='%2364ffda' stroke-opacity='0.05'%3E%3Cpath d='M0 0h10v10H0zm20 0h10v10H20zm20 0h10v10H40zm20 0h10v10H60zm20 0h10v10H80zm20 0h10v10h-10zm20 0h10v10h-10zm20 0h10v10h-10zm20 0h10v10h-10zm20 0h10v10h-10zm20 0h10v10h-10zm20 0h10v10h-10zm20 0h10v10h-10zm20 0h10v10h-10zm20 0h10v10h-10zm20 0h10v10h-10zm20 0h10v10h-10zm20 0h10v10h-10zm20 0h10v10h-10zm20 0h10v10h-10zm20 0h10v10h-10zm20 0h10v10h-10zm20 0h10v10h-10zm20 0h10v10h-10zm20 0h10v10h-10zm20 0h10v10h-10zm20 0h10v10h-10zm20 0h10v10h-10zm20 0h10v10h-10zm20 0h10v10h-10z'/%3E%3C/g%3E%3C/svg%3E");
			background-size: 400px;
			animation: matrix 60s linear infinite;
			z-index: -2;
			opacity: 0.4;
			transition: background 0.3s ease, opacity 0.3s ease;
		}

		body.light-theme::after {
			background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400' viewBox='0 0 800 800'%3E%3Cg fill='none' stroke='%230070F3' stroke-opacity='0.05'%3E%3Cpath d='M0 0h10v10H0zm20 0h10v10H20zm20 0h10v10H40zm20 0h10v10H60zm20 0h10v10H80zm20 0h10v10h-10zm20 0h10v10h-10zm20 0h10v10h-10zm20 0h10v10h-10zm20 0h10v10h-10zm20 0h10v10h-10zm20 0h10v10h-10zm20 0h10v10h-10zm20 0h10v10h-10zm20 0h10v10h-10zm20 0h10v10h-10zm20 0h10v10h-10zm20 0h10v10h-10zm20 0h10v10h-10zm20 0h10v10h-10zm20 0h10v10h-10zm20 0h10v10h-10zm20 0h10v10h-10zm20 0h10v10h-10zm20 0h10v10h-10zm20 0h10v10h-10zm20 0h10v10h-10zm20 0h10v10h-10zm20 0h10v10h-10z'/%3E%3C/g%3E%3C/svg%3E");
			opacity: 0.2;
		}

		/* More sci-fi decorations */
		.logo::before,
		.logo::after {
			text-shadow: 0 0 5px currentColor;
		}

		/* Fix padding issues with results */
		#___gcse_0 {
			max-width: 100%;
			margin: 0 auto;
		}

		/* Adjust footer to not overlap with results */
		.footer-wrapper {
			height: 40px;
			/* Match the footer height */
			margin-bottom: 20px;
		}

		/* Results wrapper container - make sure there's space for footer */
		.gsc-above-wrapper-area,
		.gsc-resultsbox-visible {
			margin-bottom: 1px;
		}

		/* Adjust for mobile */
		@media (max-width: 768px) {
			.logo {
				font-size: 36px;
			}

			.gsc-search-button-v2 {
				padding: 8px 16px !important;
			}

			.search-container::before,
			.gsc-search-box-tools .gsc-search-box .gsc-input-box::before,
			.gsc-search-box-tools .gsc-search-box .gsc-input-box::after {
				display: none;
			}

			.theme-toggle {
				position: relative;
				top: 0;
				right: 0;
				margin: 20px auto;
				justify-content: center;
			}
		}

		/* Custom container to host inline results */
		#custom-results-container {
			margin-top: 20px;
			max-height: 60vh;
			overflow-y: auto;
			background-color: var(--bg-primary);
			padding: 10px;
			border: 1px solid var(--accent-primary);
			transition: background-color 0.3s ease, border 0.3s ease;
		}

		/* Hide overlay elements injected by Google CSE */
		.gsc-modal-background-image,
		.gsc-overlay,
		.gsc-results-wrapper-overlay {
			display: none !important;
		}

		/* Force inline display of the visible results wrapper */
		.gsc-results-wrapper-visible {
			position: static !important;
			display: block !important;
			background: transparent !important;
			box-shadow: none !important;
			margin: 0 auto !important;
			max-width: 800px;
		}

		.footer {
			text-align: center;
			padding: 10px;
			background-color: var(--bg-secondary);
			border-top: 1px solid var(--border-color);
			position: fixed;
			bottom: 0;
			left: 0;
			width: 100%;
			font-size: 12px;
			color: var(--text-secondary);
			transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
			z-index: 100;
			max-width: 100vw;
		}

		.footer a {
			color: var(--accent-primary);
			text-decoration: none;
			transition: color 0.3s ease;
		}

		.footer a:hover {
			text-decoration: underline;
			color: var(--accent-secondary);
		}

		/* Footer wrapper to prevent content overlap */
		.footer-spacer {
			height: 40px;
			width: 100%;
		}

		tr td .gssb_a div:has(img) {
			display: none !important;
		}

		.overlay {
			display: none;
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background-color: rgba(0, 0, 0, 0.8);
			z-index: 1000;
		}

		.overlay-content {
			position: absolute;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
			width: 90%;
			/* Use more width on mobile */
			max-width: 800px;
		}

		.close-button {
			position: absolute;
			top: 1px;
			right: 1px;
			color: rgb(167, 167, 167);
			font-size: xx-large !important;
			font-weight: 800 !important;
			/* Slightly larger for easier tapping */
			cursor:pointer !important;
		}

		/* Responsive adjustments */
		@media (max-width: 600px) {
			.overlay-content {
				width: 95%;
				/* Use even more width on very small screens */
				padding: 15px;
				/* Adjust padding for smaller screens */
				border-radius: 5px;
				/* Smaller border radius for mobile */
			}

			.close-button {
				font-size: 22px;
				/* Adjust close button size for mobile */
				top: 5px;
				/* Adjust positioning if needed */
				right: 5px;
			}
		}
	</style>
</head>

<body>
	<div class="theme-toggle">
		<span class="theme-toggle-label">DARK</span>
		<label class="theme-switch">
			<input type="checkbox" id="theme-toggle">
			<span class="slider"></span>
		</label>
		<span class="theme-toggle-label">LIGHT</span>
	</div>
	<div class="logo-container">
		<div class="logo">NEXUS-LAB</div>
	</div>
	<div class="search-container">
		<!-- The attribute data-resultsurl="same-page" forces inline results -->
		<div class="gcse-search" data-resultsurl="same-page" data-newwindow="0"></div>
	</div>
	<div class="footer">
		CLASSIFIED DATABASE ACCESS - CLEARANCE LEVEL 7 REQUIRED - ©2025 NEXUS-LAB
	</div>

	<!-- Overlay structure -->
	<div class="overlay" id="youtube-overlay">
		<div class="overlay-content">
			<span class="close-button" onclick="closeOverlay()">&times;</span>
			<div id="youtube-player"></div>
		</div>
	</div>

	<script>
		// MutationObserver to remove any overlay elements and reparent inline results
		const observer = new MutationObserver((mutations, obs) => {

			// Reparent the visible results container into our custom container
			const customResults = document.getElementById('custom-results-container');
			const resultsWrapper = document.querySelector('.gsc-results-wrapper-visible');
			if (resultsWrapper && resultsWrapper.parentElement !== customResults) {
				customResults.appendChild(resultsWrapper);
			}
		});
		observer.observe(document.body, { childList: true, subtree: true });

		/* Theme toggle functionality */
		document.addEventListener('DOMContentLoaded', function () {
			const themeToggle = document.getElementById('theme-toggle');
			const body = document.body;

			// Check for saved theme preference
			const savedTheme = localStorage.getItem('theme');
			if (savedTheme === 'light') {
				body.classList.add('light-theme');
				themeToggle.checked = true;
				updateThemeVariables(true);
			}

			// Toggle theme when switch is clicked
			themeToggle.addEventListener('change', function () {
				if (this.checked) {
					body.classList.add('light-theme');
					localStorage.setItem('theme', 'light');
					updateThemeVariables(true);
				} else {
					body.classList.remove('light-theme');
					localStorage.setItem('theme', 'dark');
					updateThemeVariables(false);
				}
			});

			// Function to update CSS variables based on theme
			function updateThemeVariables(isLight) {
				if (isLight) {
					document.documentElement.style.setProperty('--bg-primary', 'var(--light-bg-primary)');
					document.documentElement.style.setProperty('--bg-secondary', 'var(--light-bg-secondary)');
					document.documentElement.style.setProperty('--bg-tertiary', 'var(--light-bg-tertiary)');
					document.documentElement.style.setProperty('--accent-primary', 'var(--light-accent-primary)');
					document.documentElement.style.setProperty('--accent-secondary', 'var(--light-accent-secondary)');
					document.documentElement.style.setProperty('--text-primary', 'var(--light-text-primary)');
					document.documentElement.style.setProperty('--text-secondary', 'var(--light-text-secondary)');
					document.documentElement.style.setProperty('--text-tertiary', 'var(--light-text-tertiary)');
					document.documentElement.style.setProperty('--border-color', 'var(--light-border-color)');
					document.documentElement.style.setProperty('--alert-color', 'var(--light-alert-color)');

					document.documentElement.style.setProperty('--alert-color-rgb', 'var(--light-alert-color-rgb)');

				} else {
					document.documentElement.style.setProperty('--bg-primary', 'var(--dark-bg-primary)');
					document.documentElement.style.setProperty('--bg-secondary', 'var(--dark-bg-secondary)');
					document.documentElement.style.setProperty('--bg-tertiary', 'var(--dark-bg-tertiary)');
					document.documentElement.style.setProperty('--accent-primary', 'var(--dark-accent-primary)');
					document.documentElement.style.setProperty('--accent-secondary', 'var(--dark-accent-secondary)');
					document.documentElement.style.setProperty('--text-primary', 'var(--dark-text-primary)');
					document.documentElement.style.setProperty('--text-secondary', 'var(--dark-text-secondary)');
					document.documentElement.style.setProperty('--text-tertiary', 'var(--dark-text-tertiary)');
					document.documentElement.style.setProperty('--border-color', 'var(--dark-border-color)');
					document.documentElement.style.setProperty('--alert-color', 'var(--dark-alert-color)');

					document.documentElement.style.setProperty('--alert-color-rgb', 'var(--dark-alert-color-rgb)');

				}
			}
		});

		// YouTube Overlay Functionality
		// Function to extract YouTube video ID from URL
		function getYoutubeVideoId(url) {
			const regExp = /.*(?:youtu.be\/|v\/|embed\/|watch\?|youtube.com\/user\/[^#]*#([^\/]*?\/)?)v=([a-zA-Z0-9_-]{11})/;
			const match = url.match(regExp);
			return (match && match[2]) ? match[2] : null; // corrected to return match[2]
		}

		// Function to extract the actual YouTube URL from Google's redirect URL
		function extractYouTubeUrl(googleUrl) {
			try {
				const url = new URL(googleUrl);
				const youtubeUrl = url.searchParams.get("q");
				return youtubeUrl;
			} catch (error) {
				console.error("Error extracting YouTube URL:", error);
				return null;
			}
		}

		// Function to open the overlay with the YouTube video
		// Function to open the overlay with the YouTube video
		function openOverlay(googleUrl) {
			const youtubeUrl = extractYouTubeUrl(googleUrl); // Extract YouTube URL from Google's URL
			if (!youtubeUrl) {
				console.error("Could not extract YouTube URL from Google URL:", googleUrl);
				return;
			}

			const videoId = getYoutubeVideoId(youtubeUrl);
			if (!videoId) {
				console.error("Could not extract YouTube video ID from URL:", youtubeUrl);
				return;
			}

			const overlay = document.getElementById('youtube-overlay');
			const playerDiv = document.getElementById('youtube-player');

			// Clear previous content
			playerDiv.innerHTML = '';

			// Create an iframe to embed the YouTube video
			const iframe = document.createElement('iframe');
			iframe.width = "100%"; // Make the iframe take up 100% of the container's width
			iframe.height = "auto";  // Set height to auto for responsive height calculation
			iframe.style.aspectRatio = "16 / 9"; // Maintain 16:9 aspect ratio (most common for YouTube)
			iframe.src = `https://www.youtube.com/embed/${videoId}?autoplay=1`;
			iframe.frameborder = "0";
			iframe.allowfullscreen = true;

			// Append the iframe to the player div
			playerDiv.appendChild(iframe);

			overlay.style.display = 'block';
		}

		document.addEventListener('click', function(event) {
			const overlay = document.getElementById('youtube-overlay'); // Changed to getElementById

			const isClickInside = overlay.contains(event.target);

			if (isClickInside) {
				closeOverlay();
			}
			click = 0;
		});

		// Function to close the overlay
		function closeOverlay() {
			const overlay = document.getElementById('youtube-overlay');
			const playerDiv = document.getElementById('youtube-player');

			// Stop the video by removing the iframe
			playerDiv.innerHTML = '';

			overlay.style.display = 'none';
		}

		// Intercepting Google CSE Results
		window.__gcse = {
			callback: function () {
				// This function runs after Google CSE loads

				//This function targets both title links and URL links
				function interceptYouTubeLinks() {
					const results = document.querySelectorAll('.gsc-result a.gs-title, .gsc-result .gs-visibleUrl'); // Selectors for title and URL links

					results.forEach(result => {
						const link = result; // The <a> element itself

						if (link && link.href && link.href.includes("youtube.com")) {
							link.addEventListener('click', function (event) {
								event.preventDefault(); // Prevent default link behavior
								openOverlay(link.href); // Open the overlay with the YouTube URL
							});
						}
					});
				}
				// Call the intercept function initially and whenever new results load
				interceptYouTubeLinks();

				// Set up a mutation observer to watch for changes in the search results
				const targetNode = document.querySelector('.gsc-wrapper'); // The container of the search results
				const config = {
					childList: true,
					subtree: true
				}; // Watch for changes in the children and deeper descendants of the target node

				const observer = new MutationObserver(function (mutationsList, observer) {
					for (const mutation of mutationsList) {
						if (mutation.type === 'childList') {
							// New nodes have been added, so intercept the YouTube links again
							interceptYouTubeLinks();
						}
					}
				});

				// Start observing the target node
				if (targetNode) {
					observer.observe(targetNode, config);
				}
			}
		};
	</script>
</body>

</html>
